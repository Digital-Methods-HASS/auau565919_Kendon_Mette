---
title: "Comparison of COVID-19 with the Spanish Flu 1918"
author: "Mette Emily Kendon"
date: "12/21/2020"
output: html_document
---

#Downloading packages
Packages used for the following project:

```{r}
library(tidyverse)
library(lubridate)
library(readxl)
```


#Downloading data
This project is based on two datasets found on 'Harvard Dataverse'.


```{r}
c19 <- read_csv("Data/India_States_summary_covid19_death.csv")
spanish_flu <- read_excel("Data/Mortality.monthly_Punjab.India_1916.1921.xlsx", sheet = 2)
```

Link to datasets:
*https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/28995+
*https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/9QZGZB

#Cleaning the 'c19' data frame

The 'c19'-data frame had to be cleaned because the dates formed their own columns together with their respective values.To clean the spreadsheet the two variables; ‘date’ and ‘deaths’ had to form their own two columns containing the values; date and number of deaths. I started by extracting the columns 3-163, which I had to use for the ‘pivot_longer’-function and placed them into the value ‘dates’. The reason why I did not include column 1 and 2 was because they agreed to the criteria of tidy data. 

```{r}
dates <- colnames(c19)[3:163]
```

I used the ‘pivot_longer’-function, to make the data frame ‘longer’ by increasing the number of rows and decreasing the number of columns. I also used the ‘filter’-function on the variable named ‘States’ because I was only interested in the numbers from Punjab. Finally, I had to use the ‘mutate’-function  because R recognized the values in the column ‘date’ as letters, and I wanted it to recognize them as dates. 

```{r}
c19 %>% 
  pivot_longer(all_of(dates), names_to = "date", values_to = "deaths") %>% 
  filter(States == "Punjab") %>% 
  mutate(date = ymd(date)) -> c19
```

#Visualizations for  the Analysis

I used the 'ggplot'-function for both my visualizations. 

The COVID-19 graph:

```{r}
c19 %>% 
  ggplot() +
  geom_point(mapping = aes(x = date, y = deaths))
```

The Spanish Flu graph: 

```{r}
spanish_flu %>% 
  ggplot() +
  geom_point(mapping = aes(x = Date, y = Mortality))
```